<div class="inmodal">
    <div class="modal-header">
        <button class="close" ng-click="$ctr.cancel()" type="button"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Modify/Add - {{$ctr.vendorsName}}</h4>
    </div>
    <div class="modal-body">
        <div class="row padding-top-20">
            <form novalidate autocomplete="off" name="form" ng-submit="$ctr.search()">
                <fieldset ng-disabled="$ctr.searchModel.inRequest">
                    <div class="col-xs-6 col-sm-4">
                        <label>Category</label>
                        <input type="text" class="form-control  m-b-xs"
                               placeholder="Category" ng-model="$ctr.searchModel.category">
                    </div>
                    <div class="col-xs-6 col-sm-4">
                        <label>Sub Category</label>
                        <input type="text" class="form-control  m-b-xs"
                               placeholder="Sub Category"
                               ng-model="$ctr.searchModel.sub_category">
                    </div>
                    <div class="col-xs-6 col-sm-4">
                        <label>Inventory Name</label>
                        <input type="text" class="form-control  m-b-xs"
                               placeholder="Name" ng-model="$ctr.searchModel.item_name">
                    </div>
                    <div class="col-xs-6 col-sm-4">
                        <label>SKU (Vendor)</label>
                        <input type="text" class="form-control  m-b-xs"
                               placeholder="SKU" ng-model="$ctr.searchModel.vendor_sku">
                    </div>
                    <div class="col-xs-6 col-sm-4">
                        <label>Owner</label>
                        <select class="form-control" ng-model="$ctr.searchModel.filter">
                            <option value="any">Any</option>
                            <option value="common">Common</option>
                            <option value="own">Own</option>
                        </select>
                    </div>
                    <div class="col-xs-6 col-md-4 padding-top-20">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>

    <form name="$ctr.form" autocomplete="off" novalidate ng-submit="$ctr.submit($ctr.form, true)">
        <fieldset ng-disabled="$ctr.searchModel.inRequest">
            <div class="modal-body">
                <div class="row m-b">
                    <div class="col-xs-12">
                        <div class="table-responsive">
                            <table class="table ng-scope footable-sort">
                                <thead class="th-text-center th-vertical-align-middle ">
                                <tr>
                                    <th ng-click="$ctr.getMyItems('vendor_sku')" class="width-150"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'vendor_sku' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'vendor_sku' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												SKU <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('item_name')"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'item_name' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'item_name' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Item name <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('category')" class="width-150"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'category' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'category' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Category <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('sub_category')" class="width-120"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'sub_category' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'sub_category' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Sub Category
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('unit_of_delivery')" class="width-100"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'unit_of_delivery' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'unit_of_delivery' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Unit <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('pack')" class="width-80"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'pack' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'pack' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Pack <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('size')" class="width-100"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'size' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'size' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Size <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('case_cost')" class="width-120"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'case_cost' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'case_cost' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Case($) <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th ng-click="$ctr.getMyItems('minimum_order_type')" class="width-80"
                                        ng-class="{'footable-sorted-desc': ($ctr.searchModel.order_by == 'minimum_order_type' && $ctr.searchModel.order_way == 'DESC'), 'footable-sorted': ($ctr.searchModel.order_by == 'minimum_order_type' && $ctr.searchModel.order_way == 'ASC')}">
											<span class="no-wrap cursor-pointer">
												Min Order <span class="text-danger">*</span>
												<span class="footable-sort-indicator"></span>
											</span>
                                    </th>
                                    <th class="width-150">
											<span class="no-wrap cursor-pointer">
												 Substitute For 
											</span>
                                    </th>
                                    <th style="text-align: right;">Delete</th>
                                </tr>
                                </thead>
                                <!--<tbody ng-repeat="item in $ctr.uniqueItem | orderBy: $ctr.searchModel.order_by : reverse">-->
                                <tbody ng-repeat="item in $ctr.uniqueItem">
                                <ng-form name="items">
                                    <tr>
                                        <td>
                                            <input ng-disabled="item.src == 'l'" type="text" class="form-control"
                                                   required unique-sku search-params="$ctr.searchParams"
                                                   typeahead-wait-ms="500"
                                                   typeahead-min-length="2"
                                                   uib-typeahead="sku as sku.vendor_sku for sku in $ctr.sku_lookup($viewValue)"
                                                   typeahead-focus-first="false" ng-model="item.vendor_sku"
                                                   typeahead-on-select="$ctr.apply_values($index, $item)">
                                        </td>
                                        <td>
                                            <input ng-disabled="item.src == 'l'" type="text" class="form-control"
                                                   ng-model="item.item_name" required>
                                        </td>
                                        <td>
                                            <select ng-disabled="item.src == 'l'" class="form-control"
                                                    ng-model="item.vendor_cat_id" required
													ng-change="item.sub_dd_options = $ctr.filterItems(item.id, item.vendor_cat_id)"
                                                    ng-options="item.id as item.category for item in $ctr.categories | filter : {inventory_type_id: 1}"></select>
                                        </td>
                                        <td>
                                            <select ng-disabled="item.src == 'l'" class="form-control"
                                                    ng-model="item.vendor_sub_cat_id"
                                                    ng-options="item.id as item.sub_category for item in $ctr.sub_categories | filter: {vendor_cat_id: item.vendor_cat_id}"></select>
                                        </td>
                                        <td>
                                            <select ng-disabled="item.src == 'l'" class="form-control"
                                                    ng-model="item.uom_id_of_delivery_unit" required
                                                    ng-options="item.id as item.name for item in $ctr.deliveryMeasure"></select>
                                        </td>
                                        <td>
                                            <input ng-disabled="item.src == 'l'" type="text" class="form-control"
                                                   only-digits ng-model="item.pack" required minlength="0">
                                        </td>
                                        <td>
                                            <input ng-disabled="item.src == 'l'" type="number" class="form-control"
                                                   ng-model="item.size" required minlength="0">
                                        </td>
                                        <td>
                                            <input ng-disabled="item.src == 'l'" type="number" class="form-control"
                                                   ng-model="item.case_cost" required min="0">
                                        </td>
                                        <td>
                                            <select ng-disabled="item.src == 'l'" class="form-control" required
                                                    ng-model="item.minimum_order_type">
                                                <option value="Case">CASE</option>
                                                <option value="Pack">PACK</option>
                                                <option value="Each" selected>EACH</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select ng-disabled="item.src == 'l'" class="form-control"
                                                    ng-change="$ctr.chkIfSubSelected($index)"
                                                    ng-model="item.substitute_for"
                                                    ng-options="subs.id as subs.item_name group by subs.vendor_name for subs in item.sub_dd_options | orderBy:['vendor_name','item_name']"></select>
                                        </td>
                                        <td style="padding-right: 0;">
                                            <a href="" ng-click="$ctr.removeUniqueItem($index, item)"
                                               class="btn btn-danger btn-circle pull-right"><i class="fa fa-times"></i></a>
                                        </td>
                                    </tr>
                                </ng-form>
                                </tbody>
                            </table>
                            <div class="clearfix m-b-lg m-t-lg">
                                <div class="pull-right">
                                    <ul boundary-link-numbers="true" class="pagination-sm"
                                        items-per-page="$ctr.searchModel.paginationCount"
                                        max-size="10"
                                        ng-change="$ctr.search()"
                                        ng-model="$ctr.searchModel.paginationOffset"
                                        rotate="false"
                                        total-items="$ctr.searchModel.paginationTotal"
                                        uib-pagination></ul>
                                </div>
                            </div>
                            <div class="text-right">
                                <button type="button" id="btnAddRecipe" name="btnAddRecipe" class="btn btn-info"
                                        ng-click="$ctr.addUniqueItem()"><i class="glyphicon glyphicon-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary float-right" ng-click="$ctr.cancel()" type="button">Close</button>
                <button class="btn btn-primary float-right" type="submit">Save</button>
            </div>
        </fieldset>
    </form>
</div>
