<!-- Wrapper-->
<div id="wrapper">

    <header-component></header-component>

    <navigation-component></navigation-component>

    <!-- Page wraper -->
    <div id="page-wrapper" class="white-bg">

        <!-- Main view  -->
        <!-- <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-lg-10">
                <h2>Sales Report</h2>
                <ol class="breadcrumb">
                    <li ui-sref="reports.reportsCategory">
                        <a>Reports</a>
                    </li>&nbsp;/&nbsp;
                    <li ui-sref="reports.alcohol.alcoholDetail">
                        <a>Alcohol Detail Report</a>
                    </li>&nbsp;/&nbsp;
                    <li class="active-page">
                        <a>Sales Report</a>
                    </li>
                </ol> 
            </div>
            <div class="col-lg-2">
                <h5>Sales Report</h5>
            </div>
        </div> -->
        <div class="wrapper wrapper-content  animated fadeInRight">
			<div class="row" id="top-section">
				<div class="row">
					<div class="col-sm-12">
						<div class="ibox float-e-margins">
							<div class="ibox-content">
								<div class="row">
									<div class="col-xs-12">
										<button class="btn btn-primary" ui-sref="reports.reportsCategory">&lt;&lt; Back</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.alcohol.alcoholDetail">Overview</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.alcoholCostOfSummary">Inventory Count</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.dailyOnHand">On-Hand</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.salesReport">Sales</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.analytics({typeInventory: $ctr.detail_type})">Usage</button>
										<button class="btn btn-primary active" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.pmix({typeInventory: $ctr.detail_type})">PMIX</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.costChangeReport">Cost Change</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'alcohol'" ui-sref="reports.usageVsPurchase">Purchases</button>
										
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.food.foodDetail">Overview</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.foodCostOfSummary">Inventory Count</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.foodOnHand">On-Hand</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.foodSalesReport">Sales</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.batchReport">Batches</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.analytics({typeInventory: 'food'})">Usage</button>
										<button class="btn btn-primary active" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.pmix({typeInventory: 'food'})">PMIX</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.foodCostChangeReport">Cost Change</button>
										<button class="btn btn-primary" ng-if="$ctr.detail_type == 'food'" ui-sref="reports.foodUsageVsPurchase">Purchases</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<div class="ibox-content text-center">
							<label class="font-noraml"><b>Show:</b></label>
							<button class="btn btn-danger" ng-class="{active : $ctr.mode == 'daily'}" ng-click="$ctr.changeMode('daily')">Daily</button>
							<!--<button class="btn btn-danger" ng-class="{active : $ctr.mode == 'weekly'}" ng-click="$ctr.changeMode('weekly')">Weekly</button>-->
							<!--<button class="btn btn-danger" ng-class="{active : $ctr.mode == 'trend'}" ng-click="$ctr.changeMode('trend')">Sales Trend</button>-->
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<div class="float-e-margins bottomless">
							<div class="ibox-content overflow-x-auto ir bottomless">
								<div class="row">
									<div ng-if="$ctr.mode == 'daily'" class="col-sm-2">
										<div class="form-group">
											<label class="font-noraml">Date From</label>
											<input type="date" ng-model="$ctr.start_date"/>
										</div>
									</div>
									<div ng-if="$ctr.mode == 'daily'" class="col-sm-2">
										<div class="form-group">
											<label class="font-noraml">Date To</label>
											<input type="date" ng-model="$ctr.end_date"/>
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="font-noraml">Category</label>
											<select style="width: 100%" ng-model="$ctr.category" ng-options="item.category as item.category for item in $ctr.SKU_categories"></select>
										</div>
									</div>
									<div class="col-sm-1 search-button">
										<div class="form-group">
											<button ng-if="!$ctr.loading" class="btn btn-primary" ng-click="$ctr.loadData()">Search</button>
											<button ng-if="$ctr.loading" class="btn btn-primary" disabled>Loading...</button>
										</div>
									</div>
									<div class="col-sm-3 search-button float-right">
										<div class="form-group">
												<button scroll-top class="btn btn-primary margin-right-10 float-right" ng-click="$ctr.downloadCSV()" ng-if="!$ctr.export_loading">Export Report
												</button>
												<button scroll-top class="btn btn-primary margin-right-10 float-right" ng-disabled="$ctr.export_loading" ng-if="$ctr.export_loading">Exporting...
												</button>
										</div>
									</div>
									<!--<div ng-if="$ctr.mode == 'weekly'" class="col-lg-6">
										<h2 class="float-right">PMIX Details for the week </br>
											<b class="float-right">{{$ctr.pmix_weekly_start.substring(0, 10)}} to {{$ctr.pmix_weekly_end.substring(0, 10)}}</b>
										</h2>
									</div>
									<div ng-if="$ctr.mode == 'trend'" class="col-lg-6">
										<h2 class="float-right">PMIX Details for the period </br>
											<b class="float-right">{{$ctr.pmix_trend_start.substring(0, 10)}} to {{$ctr.pmix_trend_end.substring(0, 10)}}</b>
										</h2>
									</div>-->
								</div>
								
								<div ng-if="$ctr.mode == 'daily'" class="row">
									<div class="col-lg-12">
										<table class="table table-bordered table-sm" style="margin-top: 0; margin-bottom: 0;table-layout: fixed;">
											<thead>
												<tr>
													<td style="width: 8.5%;"></td>
													<td style="width: 17.5%;"></td>
													<td style="width: 6%;"></td>
													<td style="width: 6%;"></td>
													<td style="width: 6%;"></td>
													<td style="width: 6%;"><style="">Total:</td>
													<td style="width: 6%;">{{$ctr.ttl_units_sold | number: 2}}</td>
													<td style="width: 8%;">${{$ctr.ttl_sales | number: 2}}</td>
													<td style="width: 6%;">${{$ctr.ttl_discounts | number: 2}}</td>
													<td style="width: 8%;">${{$ctr.ttl_total_cost | number: 2}}</td>
													<td style="width: 8%;">${{$ctr.ttl_gross_profit | number: 2}}</td>
													<td style="width: 8%;"></td>
													<td style="width: 6%;"></td>
												</tr>
												<tr>
													<td style="width: 8.5%;">Category</td>
													<td style="width: 17.5%;">Menu Item</td>
													<td style="width: 6%;">Pricing Level</td>
													<td style="width: 6%;">Price</td>
													<td style="width: 6%;">Unit Cost</td>
													<td style="width: 6%;">Cost %</td>
													<td style="width: 6%;">Units Sold</td>
													<td style="width: 8%;">Net Sales</td>
													<td style="width: 6%;">Disc.</td>
													<td style="width: 8%;">Total Cost</td>
													<td style="width: 8%;">Gross Profit</td>
													<td style="width: 8%;">% of Units Sold</td>
													<td style="width: 6%;">% of $ Sold</td>
												</tr>
											</thead>
										</table>
									</div>
								</div>
								
								<!--<div ng-if="$ctr.mode == 'weekly'" class="row">
									<div class="col-lg-12">
										<table class="table table-bordered table-sm" style="margin-top: 0; margin-bottom: 0;table-layout: fixed;">
											<thead>
												<tr>
													<td style="width: 8.5%;">Category</td>
													<td style="width: 17.5%;">Menu Item</td>
													<td style="width: 6%;">Pricing Level</td>
													<td style="width: 9%;">Total Weekly $ Sales</td>
													<td style="width: 9%;">Total Weekly $ Cost</td>
													<td style="width: 9%;">Gross $ Profit</td>
													<td style="width: 9%;">Last Week Units Sold</td>
													<td style="width: 9%;">13 Week Avg Units Sold</td>
													<td style="width: 9%;">Variance</td>
													<td style="width: 9%;">Last Week % of Sales</td>
													<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">Est. Prep Work Labor</td>
													<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">Cook Method</td>
													<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">Est. Time To Cook</td>
												</tr>
											</thead>
										</table>
									</div>
								</div>
								
								<div ng-if="$ctr.mode == 'trend'" class="row">
									<div class="col-lg-12">
										<table class="table table-bordered table-sm" style="margin-top: 0; margin-bottom: 0;table-layout: fixed;">
											<thead>
												<tr>
													<td style="width: 8.5%;">Category</td>
													<td style="width: 17.5%;">Menu Item</td>
													<td style="width: 6%;">Pricing Level</td>
													<td style="width: 6.8%;">Week 1</td>
													<td style="width: 6.8%;">Week 2</td>
													<td style="width: 6.8%;">Week 3</td>
													<td style="width: 6.8%;">Week 4</td>
													<td style="width: 6.8%;">Week 5</td>
													<td style="width: 6.8%;">Week 6</td>
													<td style="width: 6.8%;">Week 7</td>
													<td style="width: 6.8%;">Week 8</td>
													<td style="width: 6.8%;">Week 9</td>
													<td style="width: 6.8%;">Trend</td>
												</tr>
											</thead>
										</table>
									</div>
								</div>-->
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row" id="content-table-section">
				<div class="ibox float-e-margins">
					<div class="ibox-content ir adjust-pad">
						<table ng-if="$ctr.mode == 'daily'" class="table table-bordered table-sm" style="table-layout: fixed;">
							<tbody ng-repeat="item in $ctr.pmix_data">
								<tr>
									<td style="width: 8.5%;">{{item.category}}</td>
									<td style="width: 17.5%;">{{item.name}}</td>
									<td style="width: 6%;">{{item.price_number}}</td>
									<td style="width: 6%;">{{item.price | number: 2}}</td>
									<td style="width: 6%;">{{item.cost | number: 2}}</td>
									<td style="width: 6%;">{{item.cost_margin | number: 2}}</td>
									<td style="width: 6%;">{{item.units_sold}}</td>
									<td style="width: 8%;">{{item.sales | number: 2}}</td>
									<td style="width: 6%;">{{item.discounts | number: 2}}</td>
									<td style="width: 8%;">{{item.total_cost | number: 2}}</td>
									<td style="width: 8%;">{{item.gross_profit | number: 2}}</td>
									<td style="width: 8%;">{{item.percent_of_units_sold}}</td>
									<td style="width: 6%;">{{item.percent_of_sales}}</td>
								</tr>
							</tbody>
						</table>
						
						<!--<table ng-if="$ctr.mode == 'weekly'" class="table table-bordered table-sm" style="table-layout: fixed;">
							<tbody ng-repeat="item in $ctr.pmix_data">
								<tr>
									<td style="width: 8.5%;">{{item.category}}</td>
									<td style="width: 17.5%;">{{item.name}}</td>
									<td style="width: 6%;">{{item.price_number}}</td>
									<td style="width: 9%;">{{item.sales | number: 2}}</td>
									<td style="width: 9%;">{{item.cost | number: 2}}</td>
									<td style="width: 9%;">{{item.sales - item.cost | number: 2}}</td>
									<td style="width: 9%;">{{item.units_sold}}</td>
									<td style="width: 9%;">{{item.units_sold_avg_13_weeks | number: 2}}</td>
									<td style="width: 9%;">{{(item.units_sold - item.units_sold_avg_13_weeks) | number: 2}}</td>
									<td style="width: 9%;">{{item.percent_of_sales | number: 2}}</td>
									<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">{{}}</td>
									<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">{{}}</td>
									<td style="width: 8.3%;" ng-if="$ctr.detail_type == 'food'">{{}}</td>
								</tr>
							</tbody>
						</table>
						
						<table ng-if="$ctr.mode == 'trend'" class="table table-bordered table-sm" style="table-layout: fixed;">
							<tbody ng-repeat="item in $ctr.pmix_data">
								<tr>
									<td style="width: 8.5%;">{{item.category}}</td>
									<td style="width: 17.5%;">{{item.name}}</td>
									<td style="width: 6%;">{{item.price_number}}</td>
									<td style="width: 6.8%;">{{item.week_1}}</td>
									<td style="width: 6.8%;">{{item.week_2}}</td>
									<td style="width: 6.8%;">{{item.week_3}}</td>
									<td style="width: 6.8%;">{{item.week_4}}</td>
									<td style="width: 6.8%;">{{item.week_5}}</td>
									<td style="width: 6.8%;">{{item.week_6}}</td>
									<td style="width: 6.8%;">{{item.week_7}}</td>
									<td style="width: 6.8%;">{{item.week_8}}</td>
									<td style="width: 6.8%;">{{item.week_9}}</td>
									<td style="width: 6.8%;" ng-class='{red_text : item.trend < 0, green_text: item.trend > 1}'>{{item.trend}}</td>
								</tr>
							</tbody>
						</table>-->
					</div>
				</div>
			</div>
        </div>

        <!-- Footer -->
        <div ng-include="'views/common/footer.html'"></div>

    </div>
    <!-- End page wrapper-->

</div>
<!-- End wrapper-->
<style>
.ir select, .ir input {
    height: 35px;
    padding: 5px;
    margin-bottom: 10px;
}
.ir button {
    border-color: #0078d7;
    background-color: #0078d7;
    display: inline-block;
    padding: 6px 12px;
    margin-bottom: 0;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.42857143;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -ms-touch-action: manipulation;
    touch-action: manipulation;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-image: none;
    border: 1px solid transparent;
    border-radius: 4px;
    color: #fff;
	position: relative;
    top: -3px;
}

#content-table-section {
    max-height: 55vh;
    overflow-y: scroll;
}

.adjust-pad {
    padding-right: 2px;
    padding-top: 0
}

#top-section {
    position: absolute;
}

.bottomless {
	padding-bottom: 0;
	border-bottom: 0;
}
</style>

<script>
    $(document).ready(function () {
        setTimeout(function () {
            var height = document.getElementById('top-section').clientHeight;
            $('#content-table-section').css('margin-top', height + 'px');
        }, 2000);
    });
</script>